import Registry from '../../schema/Registry.js';
import generatePages from './pages.js';
import generateViews from './views/index.js';
import generateRoutes from './routes.js';
export default function generate(props) {
    const { schema, project } = props;
    const registry = new Registry(schema);
    generatePages(project, registry);
    generateViews(project, registry);
    generateRoutes(project, registry);
    for (const model of registry.model.values()) {
        const filepath = `${model.name}/index.ts`;
        const source = project.getSourceFile(filepath)
            || project.createSourceFile(filepath, '', { overwrite: true });
        source.addImportDeclaration({
            moduleSpecifier: './admin/routes.js',
            defaultImport: 'admin'
        });
        source.addExportDeclaration({ namedExports: ['admin'] });
    }
}
;
