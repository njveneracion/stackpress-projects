import { action } from '@stackpress/ingest/Server';
import push from '../../scripts/push.js';
export default action(async function PushScript(_req, res, ctx) {
    const cli = ctx.plugin('cli');
    const database = ctx.plugin('database');
    if (!database) {
        cli?.verbose && cli.control.error('No database found');
        res.setError('No database found');
        return;
    }
    await push(ctx, database, cli);
    res.setStatus(200);
});
