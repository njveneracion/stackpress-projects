import restore from '../actions/restore.js';
export default function restoreEventFactory(model) {
    return async function RestoreEventAction(req, res, ctx) {
        if (res.body || (res.code && res.code !== 200)) {
            return;
        }
        const engine = ctx.plugin('database');
        if (!engine)
            return;
        const ids = Object.fromEntries(model.ids
            .map(column => [column.name, req.data(column.name)])
            .filter(entry => Boolean(entry[1])));
        const response = await restore(model, engine, ids);
        res.fromStatusResponse(response);
    };
}
;
