import upsert from '../actions/upsert.js';
export default function upsertEventFactory(model) {
    return async function UpsertEventAction(req, res, ctx) {
        if (res.body || (res.code && res.code !== 200)) {
            return;
        }
        const engine = ctx.plugin('database');
        if (!engine)
            return;
        const input = model.input(req.data(), false);
        const seed = ctx.config.path('database.seed', 'abc123');
        const response = await upsert(model, engine, input, seed);
        res.fromStatusResponse(response);
    };
}
;
