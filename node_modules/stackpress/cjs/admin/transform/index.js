"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = generate;
const Registry_js_1 = __importDefault(require("../../schema/Registry.js"));
const pages_js_1 = __importDefault(require("./pages.js"));
const index_js_1 = __importDefault(require("./views/index.js"));
const routes_js_1 = __importDefault(require("./routes.js"));
function generate(props) {
    const { schema, project } = props;
    const registry = new Registry_js_1.default(schema);
    (0, pages_js_1.default)(project, registry);
    (0, index_js_1.default)(project, registry);
    (0, routes_js_1.default)(project, registry);
    for (const model of registry.model.values()) {
        const filepath = `${model.name}/index.ts`;
        const source = project.getSourceFile(filepath)
            || project.createSourceFile(filepath, '', { overwrite: true });
        source.addImportDeclaration({
            moduleSpecifier: './admin/routes.js',
            defaultImport: 'admin'
        });
        source.addExportDeclaration({ namedExports: ['admin'] });
    }
}
;
