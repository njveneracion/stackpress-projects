import Terminal, { control } from '@stackpress/lib/Terminal';
import Transformer from './Transformer.js';
export { control };
export default class IdeaTerminal extends Terminal {
    static async load(args, options = {}) {
        return new IdeaTerminal(args, options);
    }
    cwd;
    extname;
    constructor(args, options = {}) {
        super(args, options.brand || '[IDEA]');
        this.cwd = options.cwd || process.cwd();
        this.extname = options.extname || '.idea';
        this.on('transform', async (_) => {
            const flags = ['input', 'i'];
            const filepath = `${this.cwd}/schema${this.extname}`;
            const input = this.expect(flags, filepath);
            const transformer = await Transformer.load(input, options);
            await transformer.transform({ cli: this });
        });
    }
}
