import map from '@stackpress/lib/map';
import { VFS_PROTOCOL } from './constants.js';
export default class VirtualServer {
    fs;
    constructor() {
        this.fs = map();
    }
    get(filepath) {
        const data = this.fs.get(filepath);
        if (typeof data === 'string') {
            return Buffer.from(data, 'base64').toString('utf8');
        }
        return null;
    }
    has(filepath) {
        return this.fs.has(filepath);
    }
    set(filepath, contents) {
        const data = Buffer.from(contents).toString('base64');
        this.fs.set(filepath, data);
        return `${VFS_PROTOCOL}${filepath}`;
    }
}
