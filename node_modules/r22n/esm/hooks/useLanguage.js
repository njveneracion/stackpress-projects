'use client';
import { Fragment as _Fragment, jsxs as _jsxs } from "react/jsx-runtime";
import { useContext } from 'react';
import R22nContext from '../context.js';
export default function useLanguage() {
    const { language, placeholder, translations, changeLanguage } = useContext(R22nContext);
    const engine = {
        language,
        changeLanguage,
        template(phrase) {
            const translation = translations[phrase] ?? phrase;
            const chunks = translation.split(placeholder);
            return function Translation(...variables) {
                if (translation.indexOf(placeholder) < 0)
                    return translation;
                const children = [];
                chunks.forEach((chunk, i) => {
                    children.push(chunk);
                    if (variables[i]) {
                        children.push(variables[i]);
                    }
                });
                const allStrings = children.filter(child => typeof child === 'string').length === children.length;
                if (allStrings) {
                    return children.join('');
                }
                return (_jsxs(_Fragment, { children: [...children] }));
            };
        },
        t(phrase, ...variables) {
            return engine.template(phrase.join(placeholder))(...variables);
        },
        _(phrase, ...variables) {
            return engine.template(phrase)(...variables);
        }
    };
    return engine;
}
;
